<%- include ("partials/header") -%> 

<div class="single">
    
    <div class="container">
       <div class="single-head">
        <h1><%=objArticle.title %></h1>
       </div> 
       <main>
        <%- objArticle.title %> 
       </main>
       <div class="main-panel">
           <h4>اعلانات</h4>
           <div class="content"></div>
       </div>
       <div class="single-content">
           <div class="text">
            <%- objArticle.description %> 
           </div>
       </div>
       <% if(user){ %> 
       <button data-linkid="<%= objArticle._id %>" class="create">
        حذف هذا الموضوع
       </button>
  
    <% } %> 
    </div>
</div>
<script>
    const btnelement = document.querySelector(".create")
    const articleId = btnelement.getAttribute("data-linkid");


    //  what is data ?
    // {mylink: "/all-articles" }


    btnelement.addEventListener("click", (eo) => {

        fetch(`/all-articles/delete/${articleId}`, { method: "DELETE" })
            .then((response) => response.json())
            .then((data) => window.location.href = data.mylink)
            .catch((err) => {
                console.log(err);
            });
    })



</script>

<%- include ("partials/footer") -%> 
